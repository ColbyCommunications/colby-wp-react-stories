!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t){e.exports=React},function(e,t){e.exports=PropTypes},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.loadStories=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),f=n(0),d=a(f),p=n(15),m=a(p),h=n(17),y=a(h),g=n(16),v=a(g),b=n(9),w=a(b),C=n(6),E=a(C),_=n(10),S=a(_),P=n(14),T=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={activeCategory:window.COLBY_STORIES_ACTIVE_CATEGORY||"0",fetching:!1,postCategories:{},columnCount:t.setColumnCount(),data:{},searchTerm:"",featuredImages:{},fetchUrl:""},n.fetchPosts=v.default.debounce(n.fetchPosts.bind(n),500),n.renderColumn=n.renderColumn.bind(n),n.getPostsForColumn=n.getPostsForColumn.bind(n),n.renderPost=n.renderPost.bind(n),n.fetchCategories=n.fetchCategories.bind(n),n.renderPostCategories=n.renderPostCategories.bind(n),n.renderBody=n.renderBody.bind(n),n.fetchFeaturedMedia=n.fetchFeaturedMedia.bind(n),n}return i(t,e),l(t,null,[{key:"setColumnCount",value:function(){var e=1;return window.innerWidth>576&&(e=2),window.innerWidth>768&&(e=3),window.innerWidth>992&&(e=4),e}}]),l(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchPosts(),window.addEventListener("resize",function(){var n=t.setColumnCount();n!==e.state.columnCount&&e.setState({columnCount:n})})}},{key:"componentDidUpdate",value:function(e,t){var n=this;t.activeCategory!==this.state.activeCategory&&this.fetchPosts(),this.fetchCategories(),(this.state.data[this.state.fetchUrl]?this.state.data[this.state.fetchUrl].posts:[]).forEach(function(e){n.fetchFeaturedMedia(e.featured_media)})}},{key:"getPostsForColumn",value:function(e){var t=this;return this.state.data[this.state.fetchUrl].posts.filter(function(n,a){return a%t.state.columnCount===e})}},{key:"fetchFeaturedMedia",value:function(e){var t=this;if(!(0===e||e in this.state.featuredImages)){var n=window.COLBY_REST_URL+"wp/v2/media/"+e;fetch(n).then(function(e){return!0===e.ok?e.json():null}).then(function(n){var a=Object.assign({},t.state.featuredImages);a[e]=n,t.setState({featuredImages:a})})}}},{key:"fetchCategories",value:function(){var e=this;if(this.state.data[this.state.fetchUrl]){var t=[];if(this.state.data[this.state.fetchUrl].posts.forEach(function(n){n.categories.forEach(function(n){n in e.state.postCategories||-1===t.indexOf(n)&&t.push(n)})}),t.length){var n=window.COLBY_REST_URL+"wp/v2/categories/",a=n+"?exclude=1";fetch(a).then(function(e){return e.json()}).then(function(t){var n=Object.assign({},e.state.postCategories);t.forEach(function(e){n[e.id]=e}),e.setState({postCategories:n})})}}}},{key:"fetchPosts",value:function(){var e=this;this.setState({fetching:!0},function(){var t=e.props.endpoint.replace("{{siteUrl}}",window.COLBY_SITE_URL)+"&per_page="+e.props.perPage;"0"!==e.state.activeCategory&&null!==e.state.activeCategory&&(t=t+"&categories="+e.state.activeCategory),e.state.searchTerm.length&&(t=t+"&search="+e.state.searchTerm);var n=1;if(t in e.state.data){if(e.state.data[t].nextPage>e.state.data[t].headers.totalPages)return void e.setState({fetchUrl:t,fetching:!1});n=e.state.data[t].nextPage}var a=void 0;fetch(t+"&page="+n).then(function(e){var t=Number(e.headers.get("X-WP-TOTALPAGES"));return a={totalPages:t},e.json()}).then(function(n){var r=Object.assign({},e.state.data);r[t]?(r[t].posts=r[t].posts.concat(n),r[t].nextPage+=1):r[t]={headers:a,posts:n,nextPage:2},e.setState({data:r,fetchUrl:t,fetching:!1})})})}},{key:"renderBody",value:function(){return this.state.searchTerm.length&&0===this.state.data[this.state.fetchUrl].posts?d.default.createElement("div",{className:T.default.noResultsContainer},"No results for ",d.default.createElement("i",null,this.state.searchTerm)):v.default.range(0,this.state.columnCount).map(this.renderColumn)}},{key:"renderColumn",value:function(e){return d.default.createElement("div",{key:e,className:T.default.column},this.getPostsForColumn(e).map(this.renderPost))}},{key:"renderPostCategories",value:function(e){var t=this;return d.default.createElement("span",null,e.map(function(e){if(!(e in t.state.postCategories))return null;var n=t.state.postCategories[e],a=n.id,r=n.name,o=n.meta;return d.default.createElement("div",{className:T.default.categoryButtonContainer,key:a},d.default.createElement("button",{style:{backgroundColor:o.background_color||"#002878",color:o.color||"#000"},onClick:function(){t.setState({activeCategory:a},function(){return(0,S.default)(t.container)})},className:T.default.categoryButton+" badge"},r))}))}},{key:"renderPost",value:function(e){var t=null;if(e.featured_media in this.state.featuredImages&&null!==this.state.featuredImages[e.featured_media]&&this.state.featuredImages[e.featured_media].media_details){var n=this.state.featuredImages[e.featured_media].media_details.sizes.medium;t=d.default.createElement("img",{className:"card-img",alt:e.title.rendered,src:n.source_url,width:n.width,height:n.height})}return d.default.createElement("div",{className:[T.default.item,"card",null===t?"":T.default.hasFeaturedImage].join(" "),key:e.id},t,d.default.createElement("div",{className:"card-body"},this.renderPostCategories(e.categories),d.default.createElement("h3",{className:"card-title"},d.default.createElement("a",{href:e.link,dangerouslySetInnerHTML:{__html:e.title.rendered}})),d.default.createElement("p",{dangerouslySetInnerHTML:{__html:e.excerpt.rendered}})),d.default.createElement("date",{dateTime:e.date,className:T.default.cardFooter},y.default.distanceInWords(new Date,e.date,{addSuffix:!0})))}},{key:"render",value:function(){var e=this;if(!this.state.data[this.state.fetchUrl])return null;var t=null;return!0===this.state.fetching?t=d.default.createElement("div",{className:T.default.ellipsisContainer},d.default.createElement(w.default,null)):this.state.data[this.state.fetchUrl].headers.totalPages>=this.state.data[this.state.fetchUrl].nextPage&&(t=d.default.createElement("div",{className:T.default.buttonContainer},d.default.createElement("button",{className:"btn btn-primary "+T.default.moreButton,onClick:function(){e.fetchPosts()}},"More"))),d.default.createElement("div",{ref:function(t){e.container=t},className:""+T.default.Stories},d.default.createElement("div",{className:T.default.storiesHeader},d.default.createElement("div",{className:T.default.search},d.default.createElement(E.default,{placeholder:"Search the archive",searchTerm:this.state.searchTerm,fetching:!(!this.state.searchTerm.length||!this.state.fetching),handleSearchTermChange:function(t){e.setState({searchTerm:t},e.fetchPosts)}})),d.default.createElement("div",{className:T.default.categories},d.default.createElement("label",{className:T.default.categoryLabel,htmlFor:"categorySelect"},d.default.createElement("span",{className:T.default.categoryLabelText},"Category"),d.default.createElement("select",{id:"categorySelect",value:this.state.activeCategory,onChange:function(t){e.setState({activeCategory:t.target.value})}},d.default.createElement("option",{value:0},"All"),Object.keys(this.state.postCategories).map(function(t){return d.default.createElement("option",{key:t,value:t},e.state.postCategories[t].name)}))))),this.renderBody(),t)}}]),t}(d.default.Component);O.propTypes={endpoint:c.default.string.isRequired,perPage:c.default.string},O.defaultProps={perPage:"12"};var N=function(){Array.prototype.forEach.call(document.querySelectorAll("[data-stories]"),function(e){m.default.render(d.default.createElement(O,s({container:e},e.dataset)),e)})};t.default=O,t.loadStories=N},function(e,t,n){"use strict";!function(){function t(e){this.className=e&&e.className||"animated-ellipsis",this.style=e&&e.style||void 0,this.spacing=e&&e.spacing||"0.1rem",this.fontSize=e&&e.fontSize||"2rem",this.marginLeft=e&&e.marginLeft||"0.1rem",this.steps=3,this.duration=2,this.perDelay=.2,this.insertStyleNode()}function n(e){var t=e,n=a.steps,r=a.perDelay,o=t.dataset.marginLeft||a.marginLeft,i=t.dataset.spacing||a.spacing;t.style.marginLeft=o,t.style.fontSize=a.fontSize;for(var s=0;s<n;++s){var l=document.createElement("span"),u=s*r;l.className=".$step"+s,l.innerHTML=".";var c="                opacity: 0;                 -webkit-animation: animated-ellipsis "+a.duration+"s infinite;                 animation: animated-ellipsis "+a.duration+"s infinite;                 -webkit-animation-delay: "+u+"s;                 animation-delay: "+u+"s;             ";0!==s&&(c+="margin-left: "+i+";"),l.style.cssText=c,l=t.appendChild(l)}}t.prototype.insertStyleNode=function(){var e=document.createElement("style");e.type="text/css",e.innerHTML="             @-webkit-keyframes animated-ellipsis {                 0%   { opacity: 0; }                 50%  { opacity: 0; }                 100% { opacity: 1; }             }             @keyframes animated-ellipsis {                 0%   { opacity: 0; }                 50%  { opacity: 0; }                 100% { opacity: 1; }             }",this.style=document.getElementsByTagName("head")[0].appendChild(e)};var a=new t;window.HTMLElement.prototype.animateEllipsis=function(){n(this)},window.NodeList.prototype.animateEllipsis=function(){for(var e=0;e<this.length;++e)n(this[e])},window.HTMLElement.prototype.stopAnimatingEllipsis=function(){for(var e=this;e.hasChildNodes();)e.removeChild(e.lastChild);delete e.style.marginLeft},e.exports=a}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return i.default.createElement("div",{className:l.default.ellipsis},i.default.createElement("span",null,"."),i.default.createElement("span",null,"."),i.default.createElement("span",null,"."))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),i=a(o),s=n(13),l=a(s)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=a(r),i=n(1),s=a(i),l=n(4),u=a(l),c=n(7),f=a(c),d=n(12),p=a(d),m=function(e){var t=e.optionsComponents,n=e.optionsPlacement,a=e.id,r=e.placeholderText,i=e.searchTerm,s=e.handleSearchTermChange,l=e.fetching,c=e.styles;return o.default.createElement("div",{className:c.container},t&&"top"===n?o.default.createElement("div",{className:c.optionsContainer},t):null,o.default.createElement("label",{htmlFor:a,className:c.label},o.default.createElement("span",{className:c["label-name"]},r),o.default.createElement("input",{id:a,className:c.input,placeholder:r,type:"search",value:i,onChange:function(e){s(e.target.value)}}),o.default.createElement("span",{className:c.feedback},!0===l?o.default.createElement(u.default,null):f.default)),t&&"bottom"===n?o.default.createElement("div",{className:c.optionsContainer},t):null)};m.defaultProps={fetching:!1,id:Math.random().toString(36).substr(2,5),optionsComponents:null,optionsPlacement:"bottom",placeholderText:"Search",styles:p.default},m.propTypes={handleSearchTermChange:s.default.func.isRequired,searchTerm:s.default.string.isRequired,fetching:s.default.bool,id:s.default.string,optionsComponents:s.default.arrayOf(s.default.any),optionsPlacement:s.default.oneOf(["top","bottom"]),placeholderText:s.default.string,styles:s.default.objectOf(s.default.any)},t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r.default.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z",fill:"currentColor"}));t.default=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(3);var u=n(0),c=a(u),f=n(1),d=a(f),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.wrapper.animateEllipsis()}},{key:"componentWillUnmount",value:function(){this.wrapper.stopAnimatingEllipsis()}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,a=t.className,r=t.marginLeft,o=t.spacing,i=t.fontSize;return i&&(n.fontSize=i),c.default.createElement("span",{ref:function(t){return e.wrapper=t},className:a,style:n,"data-margin-left":r,"data-spacing":o})}}]),t}(c.default.Component);p.propTypes={style:d.default.object,className:d.default.string,fontSize:d.default.string,marginLeft:d.default.string,spacing:d.default.string},p.defaultProps={style:{},className:"",fontSize:"2rem",marginLeft:"0.1rem",spacing:"0.1rem"},t.default=p},function(e,t,n){"use strict";e.exports=n(8)},function(e,t,n){"use strict";var a,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,i){a=i,void 0!==(r="function"==typeof a?a.call(t,n,t,e):a)&&(e.exports=r)}(0,function(){if("object"===("undefined"==typeof window?"undefined":o(window))&&void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var e=function(e,t){return"HTML"===e.nodeName?-t:e.getBoundingClientRect().top+t},t=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},n=function(e,n,a,r){return a>r?n:e+(n-e)*t(a/r)},a=function(t,a,r,o){a=a||500,o=o||window;var i=o.scrollTop||window.pageYOffset;if("number"==typeof t)var s=parseInt(t);else var s=e(t,i);var l=Date.now(),u=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,15)};!function e(){var c=Date.now()-l;o!==window?o.scrollTop=n(i,s,c,a):window.scroll(0,n(i,s,c,a)),c>a?"function"==typeof r&&r(t):u(e)}()},r=function(e){e.preventDefault(),location.hash!==this.hash&&window.history.pushState(null,null,this.hash);var t=document.getElementById(this.hash.substring(1));t&&a(t,500,function(e){location.replace("#"+e.id)})};return document.addEventListener("DOMContentLoaded",function(){for(var e,t=document.querySelectorAll('a[href^="#"]:not([href="#"])'),n=t.length;e=t[--n];)e.addEventListener("click",r,!1)}),a}})},function(e,t,n){"use strict";var a=n(2);window.addEventListener("load",a.loadStories)},function(e,t){e.exports={container:"container",optionsContainer:"optionsContainer",label:"label",feedback:"feedback","label-name":"label-name",input:"input"}},function(e,t){e.exports={ellipsis:"ellipsis",blink:"blink"}},function(e,t){e.exports={Stories:"Stories",column:"column",item:"item",hasFeaturedImage:"hasFeaturedImage",categoryButton:"categoryButton",categories:"categories",cardFooter:"cardFooter",storiesHeader:"storiesHeader",categoryLabelText:"categoryLabelText",ellipsisContainer:"ellipsisContainer",buttonContainer:"buttonContainer"}},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=_},function(e,t){e.exports=dateFns}]);